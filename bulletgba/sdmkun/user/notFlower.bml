<?xml version="1.0" ?>
<!DOCTYPE bulletml SYSTEM "../barrage.dtd">

<barrage>

<barrageInfo>
	<filename>notFlower</filename>
	<group>user</group>
	<title>曲がるレーザーが弾を撃つ</title>
	<description>3〜8本の曲がるレーザー（？）が5Way弾を連射します。東方妖々夢のフラワーウィザラウェイが元ネタです。</description>
	<capture>たまに自機の方へ飛んでくるレーザーに当たらないように注意。</capture>
</barrageInfo>

<barrageStyle>
	<bulletLanguage name="bulletml" />
</barrageStyle>

<bulletml type="vertical" xmlns="http://www.asahi-net.or.jp/~cs8k-cyu/bulletml">


<action label="topmove">	<!-- 弾源（移動のみ） -->
	
	<changeDirection>
		<direction type="absolute">180</direction>
		<term>1</term>
	</changeDirection>
	
	<wait>1</wait>
	
	<changeSpeed>
		<speed type="absolute">2.0</speed>
		<term>15</term>
	</changeSpeed>
	
	<wait>15</wait>
	
	<changeSpeed>
		<speed type="absolute">0</speed>
		<term>15</term>
	</changeSpeed>
	
	<wait>21*60</wait>
	
</action>


<action label="topshot">	<!-- 弾源（弾幕のみ） -->
	
	<wait>60</wait>
	
	<actionRef label="nway">
		<param>3</param>	<!-- Way数 -->
		<param>1</param>	<!-- 回転方向 -->
	</actionRef>
	
	<wait>3*60</wait>
	
	<actionRef label="nway">
		<param>4</param>
		<param>-1</param>
	</actionRef>
	
	<wait>3*60</wait>
	
	<actionRef label="nway">
		<param>5</param>
		<param>1</param>
	</actionRef>
	
	<wait>3*60</wait>
	
	<actionRef label="nway">
		<param>6</param>
		<param>-1</param>
	</actionRef>
	
	<wait>3*60</wait>
	
	<actionRef label="nway">
		<param>7</param>
		<param>1</param>
	</actionRef>
	
	<wait>3*60</wait>
	
	<actionRef label="nway">
		<param>8</param>
		<param>-1</param>
	</actionRef>
	
	<wait>5*60</wait>
	
</action>




<action label="nway">	<!-- nWay弾を撃つ -->
	
	<fire>
		<direction type="absolute">$rand*360</direction>
		<bulletRef label="crv">
			<param>$2</param>
		</bulletRef>
	</fire>
	
	<repeat><times>$1-1</times><action>
		
		<fire>
			<direction type="sequence">360/$1</direction>
			<bulletRef label="crv">
				<param>$2</param>
			</bulletRef>
		</fire>
		
	</action></repeat>
	
</action>


<bullet label="crv">	<!-- 主役 -->
	
	<speed>1.0</speed>
	
	<action>
		
		<changeDirection>
			<direction type="sequence">1.9*$1</direction>
			<term>120</term>
		</changeDirection>
		
		<changeSpeed>
			<speed type="sequence">0.010</speed>
			<term>999</term>
		</changeSpeed>
		
		
		<repeat><times>120/((10-$rank*8)*2)</times><action>
			
			<!-- 軌跡を描く -->
			<repeat><times>10-($rank*8)</times><action>
				
				<fire>
					<direction type="relative">0</direction>
					<bulletRef label="dot"/>
				</fire>
				
				<wait>2</wait>
				
			</action></repeat>
			
			<!-- 子供を撃つ -->
			<fire>
				<direction type="relative">140</direction>
				<bulletRef label="nrm"/>
			</fire>
			
			<repeat><times>4</times><action>
				
				<fire>
					<direction type="sequence">20</direction>
					<bulletRef label="nrm"/>
				</fire>
				
			</action></repeat>
			
		</action></repeat>
		
		
		<!-- 軌跡を描く -->
		<repeat><times>999</times><action>
			
			<fire>
				<direction type="relative">0</direction>
				<bulletRef label="dot"/>
			</fire>
			
			<wait>2</wait>
			
		</action></repeat>
		
	</action>
	
</bullet>


<bullet label="nrm">	<!-- 子供（普通の弾） -->
	
	<speed>0.8</speed>
	
</bullet>


<bullet label="dot">	<!-- 軌跡 -->
	<speed>0.00001</speed>
	<action>
		
		<wait>60</wait>
		
		<vanish />
		
	</action>
</bullet>


</bulletml>

</barrage>

<?xml version="1.0" ?>
<!DOCTYPE bulletml SYSTEM "../barrage.dtd">

<barrage>
.
<!-- コメント -->

<barrageInfo>
	<filename>syusogyoku_EXreimu_3-1</filename>
	<group>Seiho</group>
	<title>秋霜玉より、「博麗霊夢」第三次形態その１</title>
	<description>
		秋霜玉のExtraStageラスボス「博麗霊夢」第三次形態の開幕...に似てるかな？
		本番は50以上、再現レベルは70〜80付近のつもりです。
	</description>
	<capture>
		ばらまいているのは9way弾ですが、自機を狙っていませんので奇数弾避けは通用しません。
		その都度「道」を見極める必要があります。困った時はなんちゃって奇数弾避け一択？
	</capture>
</barrageInfo>

<!-- ここで弾の色とか形とかを指定できるようにする予定 -->
<barrageStyle>
 <!-- bulletml か lua が使えます。 -->
 <bulletLanguage name="bulletml" />
</barrageStyle>

<bulletml type="vertical" xmlns="http://www.asahi-net.or.jp/~cs8k-cyu/bulletml">

<action label="topway">
	<changeDirection>
		<direction type="aim">90+180*$rand</direction>
		<term>1</term>
	</changeDirection>
	<changeSpeed>
		<speed>1.6*$rank+2*$rand</speed>
		<term>1</term>
	</changeSpeed>
	<wait>20</wait>
	<changeSpeed>
		<speed>0</speed>
		<term>1</term>
	</changeSpeed>
	<wait>40</wait>

	<actionRef label="reimu01">
		<param>1.5+2*$rank</param>		<!-- 弾速          -->
		<param>9-2*$rank</param>		<!-- way間の角度   -->
		<param>8</param>				<!-- way-1の設定数 -->
		<param>2-$rank</param>			<!-- wait設定数    -->
	</actionRef>
	<wait>(2-$rank)*540/(9-2*$rank)/2+60*5</wait>
</action>

<action label="reimu01">
	<fire>
		<direction type="absolute">0</direction>
		<speed>0</speed>
		<bulletRef label="bit1">
			<param>$1</param>		<!-- 弾速          -->
			<param>$2</param>		<!-- way間の角度   -->
			<param>$3</param>		<!-- way-1の設定数 -->
			<param>30*$rank</param>		<!-- 初弾の角度    -->
			<param>$4</param>		<!-- wait設定数    -->
		</bulletRef>
	</fire>
	<fire>
		<direction type="absolute">0</direction>
		<speed>0</speed>
		<bulletRef label="bit2">
			<param>$1</param>		<!-- 弾速          -->
			<param>$2</param>		<!-- way間の角度   -->
			<param>$3</param>		<!-- way-1の設定数 -->
			<param>90+30*$rank</param>		<!-- 初弾の角度    -->
			<param>$4</param>		<!-- wait設定数    -->
		</bulletRef>
	</fire>
	<fire>
		<direction type="absolute">0</direction>
		<speed>0</speed>
		<bulletRef label="bit1">
			<param>$1</param>		<!-- 弾速          -->
			<param>$2</param>		<!-- way間の角度   -->
			<param>$3</param>		<!-- way-1の設定数 -->
			<param>180+30*$rank</param>		<!-- 初弾の角度    -->
			<param>$4</param>		<!-- wait設定数    -->
		</bulletRef>
	</fire>
	<fire>
		<direction type="absolute">0</direction>
		<speed>0</speed>
		<bulletRef label="bit2">
			<param>$1</param>		<!-- 弾速          -->
			<param>$2</param>		<!-- way間の角度   -->
			<param>$3</param>		<!-- way-1の設定数 -->
			<param>270+30*$rank</param>		<!-- 初弾の角度    -->
			<param>$4</param>		<!-- wait設定数    -->
		</bulletRef>
	</fire>
</action>

<bullet label="bit1">
	<action>
		<fire>
			<direction type="absolute">$4</direction>
			<speed>$1</speed>
			<bulletRef label="color1"/>
		</fire>
		<repeat><times>$3</times>
			<action>
				<fire>
					<direction type="sequence">$2</direction>
					<speed>$1</speed>
					<bulletRef label="color1"/>
				</fire>
			</action>
		</repeat>
		<wait>$5</wait>
		<repeat><times>540/($2/2)</times>
			<action>
				<fire>
					<direction type="sequence">-$2*($3-1)-$2/2</direction>
					<speed>$1</speed>
					<bulletRef label="color1"/>
				</fire>
				<repeat><times>$3</times>
					<action>
						<fire>
							<direction type="sequence">$2</direction>
							<speed>$1</speed>
							<bulletRef label="color1"/>
						</fire>
					</action>
				</repeat>
			</action>
		<wait>$5</wait>
		</repeat>
		<vanish/>
	</action>
</bullet>

<bullet label="bit2">
	<action>
		<fire>
			<direction type="absolute">$4</direction>
			<speed>$1</speed>
			<bullet/>
		</fire>
		<repeat><times>$3</times>
			<action>
				<fire>
					<direction type="sequence">$2</direction>
					<speed>$1</speed>
					<bullet/>
				</fire>
			</action>
		</repeat>
		<wait>$5</wait>
		<repeat><times>540/($2/2)</times>
			<action>
				<fire>
					<direction type="sequence">-$2*($3-1)-$2/2</direction>
					<speed>$1</speed>
					<bullet/>
				</fire>
				<repeat><times>$3</times>
					<action>
						<fire>
							<direction type="sequence">$2</direction>
							<speed>$1</speed>
							<bullet/>
						</fire>
					</action>
				</repeat>
			</action>
		<wait>$5</wait>
		</repeat>
		<vanish/>
	</action>
</bullet>

<bullet label="color1">
	<action/>
</bullet>

</bulletml>

</barrage>

